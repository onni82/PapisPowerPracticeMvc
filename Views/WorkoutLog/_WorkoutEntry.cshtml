@model PapisPowerPracticeMvc.Models.WorkoutExerciseViewModel

<div class="workout-entry card mb-3">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">@Model.ExerciseName</h5>
        <button type="button" class="btn btn-sm btn-danger remove-exercise-btn">Remove</button>
    </div>
    <div class="card-body">
        <div class="sets-container">
            <div class="set-row row mb-2">
                <div class="col-md-2">
                    <label>Set 1</label>
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" placeholder="Reps" min="1">
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" placeholder="Weight (lbs)" step="0.5" min="0">
                </div>
                <div class="col-md-2">
                    <button type="button" class="btn btn-sm btn-outline-danger remove-set-btn">×</button>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-sm btn-outline-primary add-set-btn">Add Set</button>
        
        <div class="set-template" style="display: none;">
            <div class="set-row row mb-2">
                <div class="col-md-2">
                    <label class="set-number">Set</label>
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" placeholder="Reps" min="1">
                </div>
                <div class="col-md-4">
                    <input type="number" class="form-control" placeholder="Weight (lbs)" step="0.5" min="0">
                </div>
                <div class="col-md-2">
                    <button type="button" class="btn btn-sm btn-outline-danger remove-set-btn">×</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
$(document).ready(function() {
    // Update set numbers when sets are added/removed
    function updateSetNumbers(container) {
        container.find('.set-row').each(function(index) {
            $(this).find('.set-number, label').first().text('Set ' + (index + 1));
        });
    }
    
    // Update set numbers for this entry
    var container = $('.workout-entry').last().find('.sets-container');
    updateSetNumbers(container);
    
    // Update numbers when sets are added or removed
    $(document).on('click', '.add-set-btn', function() {
        setTimeout(function() {
            var container = $(this).closest('.workout-entry').find('.sets-container');
            updateSetNumbers(container);
        }.bind(this), 10);
    });
    
    $(document).on('click', '.remove-set-btn', function() {
        var container = $(this).closest('.workout-entry').find('.sets-container');
        setTimeout(function() {
            updateSetNumbers(container);
        }, 10);
    });
});
</script>